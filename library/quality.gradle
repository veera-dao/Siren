apply plugin: 'pmd'

pmd {
  ignoreFailures = false
  reportsDir = file("$project.buildDir/outputs/")
}

task pmd(type: Pmd, dependsOn: "assembleDebug") {
  description 'Run pmd'
  group 'verification'

  ruleSets = ["java-basic", "java-braces", "java-strings", "java-design", "java-unusedcode"]
  source = fileTree('src/main/java')

  reports {
    xml.enabled = false
    html.enabled = true
  }
}

check.doLast {
  project.tasks.getByName("pmd").execute()
}
